<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="https://www.facebook.com/2008/fbml">
	<head>
		<title>Test</title>
		<meta property="og:title" content="Lunch Rabbit" />
		<meta property="og:type" content="social" />
		<meta property="og:url" content="http://swdf.in2teck.com/"/>

		
	 	<!-- Include support librarys first -->
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="javascripts/jquery.json-2.3.min.js"></script>
		
		
		<script type="text/javascript">
			// VERSION_PROD
			var HOST = "http://glowing-moon-5161.heroku.com/"
			var APP_ID = "316932864999658";
			
			function init() {
				FB.api("/", "POST", {
					batch:[
							{
									"method":"GET",
									"name":"search-interest",
									"omit_response_on_success": true,
									"relative_url":"search?query=mamegoma&type=page"
							},
							{
									"method": "GET",
									"depends_on":"search-interest",
									"relative_url":"fql?q=select+page_id,+type,+name,+pic_square+from+page+where+page_id+in+(select+page_id,+uid+from+page_fan+where+uid+in+(528755713,100000389125405)+and+page_id+in+("{result=search-interest:$.data.*.id}"+"))"
							}
					]
			}, function(response) {
					if (!response || response.error) {
							console.log(response.error_description);
					} else {       
							/*
							*       Iterate through each Response
							*/
							for(var i=0,l=response.length; i<l; i++) {
									/*
									*       If we have set 'omit_response_on_success' to true in the Request, the Response value will be null, so continue to the next iteration
									*/
									if(response[i] === null) continue;
								   
									/*
									*       Else we are expecting a Response Body Object in JSON, so decode this
									*/
									var responseBody = JSON.parse(response[i].body);
								   
									/*
									*       If the Response Body includes an Error Object, handle the Error
									*/
									if(responseBody.error) {
											// do something useful here
											console.log(responseBody.error.message);
									}
									/*
									*       Else handle the data Object
									*/
									else {
											// do something useful here
											console.log(responseBody.data);
									}
							}                                              
					}              
			});
			}
		</script>
  </head>
  
	<body>
		<div id="fb-root"></div>
		<script type="text/javascript">
			window.fbAsyncInit = function() {
				FB.init({appId: APP_ID, status: true, cookie: true, xfbml: true});
				FB.getLoginStatus(function(response) {
						if (response.status == 'connected') {
							init();
						}
					});
			};
			(function() {
				var e = document.createElement('script');
				e.type = 'text/javascript';
				e.src = document.location.protocol +
					'//connect.facebook.net/en_US/all.js';
				e.async = true;
				document.getElementById('fb-root').appendChild(e);
			}());
		</script>
	</body>
</html>
